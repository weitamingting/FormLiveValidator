!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.LiveValidator=t():e.LiveValidator=t()}(window,function(){return(s={},l.m=n=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e};function l(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var g=n(1),r=n(2),a=n(3);var h={username:r.username,email:r.email,password:r.password,require:r.require,equal:r.equal},i=(s(o,[{key:"valide",value:function(){return(0,a.valide)(this)}}]),o);function o(e){if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e&&e.needValide){this.needValide=e.needValide;this.options=Object.assign({},{needValide:[],failedClass:"lv-failed",successClass:"lv-success",failedIconClass:"lv-failed-icon",successIconClass:"lv-success-icon",onFocusShowTips:!0},e),this.successClassList=this.options.successClass.split(" "),this.failedClassList=this.options.failedClass.split(" "),this.successIconClassList=this.options.successIconClass.split(" "),this.failedIconClassList=this.options.failedIconClass.split(" ");var v=this;this.needValide.forEach(function(t,n){var e=t.element.trim().substr(1),s=t.element.trim().substr(0,1),l=t.tipsContainer.trim().substr(1),r=document.getElementById(l),a=t.type;if(a){r.style.display="none";for(var i=document.createDocumentFragment(),o=0,u=a.length;o<u;o++){if(!h[a[o].slug])throw new Error("liveValidator暂不支持"+a[o].slug+"类型验证");if("require"===a[o].slug&&!a[o].controller)break;var d=document.createElement("div"),c=document.createElement("i");d.setAttribute("id","lv-tips-"+a[o].slug+"-"+n+"-"+o),(0,g.addClassMulti)(d,v.failedClassList),(0,g.addClassMulti)(c,v.failedIconClassList);var f=void 0;switch(a[o].slug){case"require":case"email":case"username":case"equal":f=a[o].tipsText?a[o].tipsText:h[a[o].slug].tips(a[o].controller),d.innerText=f,d.insertBefore(c,d.firstChild);break;case"password":f=a[o].tipsText?a[o].tipsText:h[a[o].slug].tips(a[o].controller),d.appendChild(f),d.lastChild.insertBefore(c,d.lastChild.firstChild)}i.appendChild(d)}switch(r.appendChild(i),s){case"#":var m=document.getElementById(e);(0,g.bindNormalEvent)(v,m,r,t,n,h);break;case"@":var p=document.getElementsByName(e);p.forEach(function(e){(0,g.bindCheckEvent)(v,e,r,t,n,h,p)})}}})}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){return e.firstElementChild?e.firstElementChild:e.firstChild}function o(e){return e.lastElementChild?e.lastElementChild:e.lastChild}function d(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}t.removeAllChildren=function(e){for(var t=e.childNodes,n=t.length-1;0<=n;n--)e.removeChild(t[n])},t.getFirstElement=i,t.getLastElement=o,t.addClassMulti=function(e,t){e.classList.add.apply(e.classList,t)},t.handleElementClass=function(e,t,n){var s="success"===n?"failed":"success";e.classList.add.apply(e.classList,t[n+"ClassList"]),e.classList.remove.apply(e.classList,t[s+"ClassList"]),e.firstChild.classList.add.apply(e.firstChild.classList,t[n+"IconClassList"]),e.firstChild.classList.remove.apply(e.firstChild.classList,t[s+"IconClassList"])},t.handlePasswordClass=function(e,t,n){var s=1<n?"success":"failed",l="success"==s?"failed":"success";e.classList.remove.apply(e.classList,t[l+"ClassList"]),e.classList.add.apply(e.classList,t[s+"ClassList"]);var r=i(o(e));r.classList.add.apply(r.classList,t[s+"IconClassList"]),r.classList.remove.apply(r.classList,t[l+"IconClassList"]);var a=["too_short","too_long","weak","medium","strong","very_strong"];e.classList.remove.apply(e.classList,a),e.classList.add(a[n])},t.getElementValue=function(e){var t=e.tagName.toLowerCase();return{input:function(e){return e.value},select:function(e){var t=e.options[e.selectedIndex].text,n=e.options[e.selectedIndex].value;return n||t}}[t](e)},t.getCheckValue=function(e){for(var t="",n=0;n<e.length;n++)e[n].checked&&(t+=e[n].value);return t},t.addEventListner=d,t.bindNormalEvent=function(e,l,r,t,a,i){var o=e,u=t.type;d(l,t.trigger,function(){for(var e=0,t=u.length;e<t;e++){if(!i[u[e].slug])throw new Error("liveValidator暂不支持"+u[e].slug+"类型验证");if("require"===u[e].slug&&!u[e].controller)break;var n="lv-tips-"+u[e].slug+"-"+a+"-"+e;i[u[e].slug].handler(o,l,n,u[e])}r.style.display="block"}),d(l,"blur",function(){for(var e=!0,t=0,n=u.length;t<n;t++){if(!i[u[t].slug])throw new Error("liveValidator暂不支持"+u[t].slug+"类型验证");if("require"===u[t].slug&&!u[t].controller)break;var s="lv-tips-"+u[t].slug+"-"+a+"-"+t;i[u[t].slug].handler(o,l,s,u[t],1)||(e=!1)}r.style.display=e?"none":"block"}),o.options.onFocusShowTips&&d(l,"focus",function(){for(var e=0,t=u.length;e<t;e++){if(!i[u[e].slug])throw new Error("liveValidator暂不支持"+u[e].slug+"类型验证");if("require"===u[e].slug&&!u[e].controller)break;var n="lv-tips-"+u[e].slug+"-"+a+"-"+e;i[u[e].slug].handler(o,l,n,u[e])}r.style.display="block"})},t.bindCheckEvent=function(e,l,r,t,a,i,s){var o=e,u=t.type;d(l,t.trigger,function(){for(var e=0,t=u.length;e<t;e++){if(!i[u[e].slug])throw new Error("liveValidator暂不支持"+u[e].slug+"类型验证");if("require"===u[e].slug&&!u[e].controller)break;var n="lv-tips-"+u[e].slug+"-"+a+"-"+e;i[u[e].slug].handler(o,s,n,u[e])}r.style.display="block"}),d(l,"blur",function(){for(var e=!0,t=0,n=u.length;t<n;t++){if(!i[u[t].slug])throw new Error("liveValidator暂不支持"+u[t].slug+"类型验证");if("require"===u[t].slug&&!u[t].controller)break;var s="lv-tips-"+u[t].slug+"-"+a+"-"+t;i[u[t].slug].handler(o,l,s,u[t],1)||(e=!1)}r.style.display=e?"none":"block"})},t.rankPassword=function(e,t,n){if(t<4)throw new Error("密码最小长度不可小于4");if(n<6)throw new Error("密码最大长度不可小于6");var s,l=0,r=1,a=2,i=3,o=4,u=5,d=0;if(e.length<t)return l;if(e.length>n)return r;/[A-Z]/.test(e)&&d++;/[a-z]/.test(e)&&d++;/[0-9]/.test(e)&&d++;/[^A-Za-z0-9]/.test(e)&&d++;(s=d)<3&&d--;e.length>t&&(d+=Math.floor((e.length-t)/2));return s<2||d<3?a:d<4||s<3?i:d<6?o:u},t.isNode=function(e){return"object"===("undefined"==typeof Node?"undefined":s(Node))?e instanceof Node:e&&"object"===(void 0===e?"undefined":s(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},t.isElement=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":s(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":s(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equal=t.require=t.password=t.email=t.username=void 0;var p=n(1),s=(t.username={handler:function(e,t,n,s,l){var r=e,a=void 0;a=(t.length?(0,p.getCheckValue):(0,p.getElementValue))(t);var i=s.controller.allowChinese?"\\u4e00-\\u9fa5":"",o=new RegExp("^[a-zA-Z0-9"+i+"_-]{"+s.controller.min+","+s.controller.max+"}$").test(a);if(l)return o;var u=document.getElementById(n);return o?(0,p.handleElementClass)(u,r,"success"):(0,p.handleElementClass)(u,r,"failed"),o},tips:function(e){return"长度"+e.min+"到"+e.max+'位，只能包含英文、数字、"_"或"-"'}},t.email={handler:function(e,t,n,s,l){var r=e,a=void 0;a=(t.length?(0,p.getCheckValue):(0,p.getElementValue))(t);var i=new RegExp("^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$").test(a);if(l)return i;var o=document.getElementById(n);return i?(0,p.handleElementClass)(o,r,"success"):(0,p.handleElementClass)(o,r,"failed"),i},tips:function(){return"请输入正确的邮箱"}},t.password={handler:function(e,t,n,s,l){var r=e,a=void 0;a=(t.length?(0,p.getCheckValue):(0,p.getElementValue))(t);var i=s.controller,o={too_short:0,too_long:1,weak:2,medium:3,strong:4,very_strong:5},u=i.min?i.min:6,d=i.max?i.max:32,c=i.allowLowestLevel?i.allowLowestLevel:"weak",f=(0,p.rankPassword)(a,u,d);if(l)return 1<f&&o[c]<=f;var m=document.getElementById(n);return(0,p.handlePasswordClass)(m,r,f),1<f&&o[c]<=f},tips:function(e){var t=document.createDocumentFragment(),n=e.min?e.min:6,s=e.max?e.max:32,l={weak:"密码长度为"+n+"到"+s+"，允许使用字母、数字、符号",medium:"密码长度为"+n+"到"+s+"，必须包含字母、数字、符号至少2种",strong:"密码长度为"+n+"到"+s+"，必须包含字母、数字、符号至少3种",very_strong:"密码长度为"+n+"到"+s+"，必须包含字母、数字、符号至少3种"},r=document.createElement("div");r.classList.add("lv-pw-strength"),t.appendChild(r);var a=document.createElement("div"),i=e.allowLowestLevel?e.allowLowestLevel:"medium";return a.innerText=l[i],a.classList.add("lv-pw-text-tip"),t.appendChild(a),t}},{handler:function(e,t,n,s,l){var r=e,a=void 0,i=!(!(a=((0,p.isElement)(t)?(0,p.getElementValue):(0,p.getCheckValue))(t))||!a.length);if(l)return i;var o=document.getElementById(n);return i?(0,p.handleElementClass)(o,r,"success"):(0,p.handleElementClass)(o,r,"failed"),i},tips:function(){return"不能为空"}});t.require=s;t.equal={handler:function(e,t,n,s,l){if(!s.controller||!s.controller.compareTarget)throw new Error("equal类验证controller.compareTarget属性不可为空");var r=e,a=(0,p.getElementValue)(t),i=s.controller.compareTarget.trim().substr(1),o=a===(0,p.getElementValue)(document.getElementById(i));if(l)return o;var u=document.getElementById(n);return o?(0,p.handleElementClass)(u,r,"success"):(0,p.handleElementClass)(u,r,"failed"),o},tips:function(){return"再次输入内容"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.valide=function(e){for(var t=e,n=!0,s=0,l=t.needValide.length;s<l&&n;s++){var r=t.needValide[s].element.trim().substr(1),a=t.needValide[s].element.trim().substr(0,1),i=t.needValide[s].tipsContainer.trim().substr(1),o=document.getElementById(i),u=t.needValide[s].type;if(!u)return!0;for(var d=0,c=u.length;d<c;d++){if(!g[u[d].slug])throw new Error("liveValidator暂不支持"+u[d].slug+"类型验证");if("require"===u[d].slug&&!u[d].controller)break;var f="lv-tips-"+u[d].slug+"-"+s+"-"+d,m=void 0;switch(a){case"#":var p=document.getElementById(r);m=g[u[d].slug].handler(t,p,f,u[d]);break;case"@":var v=document.getElementsByName(r);m=g[u[d].slug].handler(t,v,f,u[d])}if(!m){n=!1,o.style.display="block";break}o.style.display="none"}}return n};var s=n(2),g={username:s.username,email:s.email,password:s.password,require:s.require,equal:s.equal}}],l.c=s,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(n,s,function(e){return t[e]}.bind(null,s));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=0)).default;function l(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,l),t.l=!0,t.exports}var n,s});