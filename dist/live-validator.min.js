!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.LiveValidator=t():e.LiveValidator=t()}(window,function(){return(r={},s.m=n=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=n(1),l=n(2),a=n(3);var h={username:l.username,email:l.email,password:l.password,require:l.require,equal:l.equal},i=(r(o,[{key:"valide",value:function(){return(0,a.valide)(this)}}]),o);function o(e){if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e&&e.needValide){this.needValide=e.needValide;this.options=Object.assign({},{needValide:[],failedClass:"lv-failed",successClass:"lv-success",failedIconClass:"lv-failed-icon",successIconClass:"lv-success-icon",onFocusShowTips:!0},e),this.successClassList=this.options.successClass.split(" "),this.failedClassList=this.options.failedClass.split(" "),this.successIconClassList=this.options.successIconClass.split(" "),this.failedIconClassList=this.options.failedIconClass.split(" ");var p=this;this.needValide.forEach(function(t,n){var e=t.element.trim().substr(1),r=t.element.trim().substr(0,1),s=t.tipsContainer.trim().substr(1),l=document.getElementById(s),a=t.type;if(a){l.style.display="none";for(var i=document.createDocumentFragment(),o=0,u=a.length;o<u;o++){if(!h[a[o].slug])throw new Error("liveValidator暂不支持"+a[o].slug+"类型验证");if("require"===a[o].slug&&!a[o].controller)break;var d=document.createElement("div"),c=document.createElement("i");d.setAttribute("id","lv-tips-"+a[o].slug+"-"+n+"-"+o),(0,g.addClassMulti)(d,p.failedClassList),(0,g.addClassMulti)(c,p.failedIconClassList);var f=void 0;switch(a[o].slug){case"require":case"email":case"username":case"equal":f=a[o].tipsText?a[o].tipsText:h[a[o].slug].tips(a[o].controller),d.innerText=f,d.insertBefore(c,d.firstChild);break;case"password":f=a[o].tipsText?a[o].tipsText:h[a[o].slug].tips(a[o].controller),d.appendChild(f),d.lastChild.insertBefore(c,d.lastChild.firstChild)}i.appendChild(d)}switch(l.appendChild(i),r){case"#":var m=document.getElementById(e);(0,g.bindNormalEvent)(p,m,l,t,n,h);break;case"@":var v=document.getElementsByName(e);v.forEach(function(e){(0,g.bindCheckEvent)(p,e,l,t,n,h,v)})}}})}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){return e.firstElementChild?e.firstElementChild:e.firstChild}function o(e){return e.lastElementChild?e.lastElementChild:e.lastChild}function d(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}t.removeAllChildren=function(e){for(var t=e.childNodes,n=t.length-1;0<=n;n--)e.removeChild(t[n])},t.getFirstElement=i,t.getLastElement=o,t.addClassMulti=function(e,t){e.classList.add.apply(e.classList,t)},t.handleElementClass=function(e,t,n){var r="success"===n?"failed":"success";e.classList.add.apply(e.classList,t[n+"ClassList"]),e.classList.remove.apply(e.classList,t[r+"ClassList"]),e.firstChild.classList.add.apply(e.firstChild.classList,t[n+"IconClassList"]),e.firstChild.classList.remove.apply(e.firstChild.classList,t[r+"IconClassList"])},t.handlePasswordClass=function(e,t,n){var r=1<n?"success":"failed",s="success"==r?"failed":"success";e.classList.remove.apply(e.classList,t[s+"ClassList"]),e.classList.add.apply(e.classList,t[r+"ClassList"]);var l=i(o(e));l.classList.add.apply(l.classList,t[r+"IconClassList"]),l.classList.remove.apply(l.classList,t[s+"IconClassList"]);var a=["lv-pw-too-short","lv-pw-too-long","lv-pw-weak","lv-pw-medium","lv-pw-strong","lv-pw-very-strong"];e.classList.remove.apply(e.classList,a),e.classList.add(a[n])},t.getElementValue=function(e){var t=e.tagName.toLowerCase();return{input:function(e){return e.value},select:function(e){var t=e.options[e.selectedIndex].text,n=e.options[e.selectedIndex].value;return n||t}}[t](e)},t.getCheckValue=function(e){for(var t="",n=0;n<e.length;n++)e[n].checked&&(t+=e[n].value);return t},t.addEventListner=d,t.bindNormalEvent=function(e,s,l,t,a,i){var o=e,u=t.type;d(s,t.trigger,function(){for(var e=0,t=u.length;e<t;e++){if(!i[u[e].slug])throw new Error("liveValidator暂不支持"+u[e].slug+"类型验证");if("require"===u[e].slug&&!u[e].controller)break;var n="lv-tips-"+u[e].slug+"-"+a+"-"+e;i[u[e].slug].handler(o,s,n,u[e])}l.style.display="block"}),d(s,"blur",function(){for(var e=!0,t=0,n=u.length;t<n;t++){if(!i[u[t].slug])throw new Error("liveValidator暂不支持"+u[t].slug+"类型验证");if("require"===u[t].slug&&!u[t].controller)break;var r="lv-tips-"+u[t].slug+"-"+a+"-"+t;i[u[t].slug].handler(o,s,r,u[t],1)||(e=!1)}l.style.display=e?"none":"block"}),o.options.onFocusShowTips&&d(s,"focus",function(){for(var e=0,t=u.length;e<t;e++){if(!i[u[e].slug])throw new Error("liveValidator暂不支持"+u[e].slug+"类型验证");if("require"===u[e].slug&&!u[e].controller)break;var n="lv-tips-"+u[e].slug+"-"+a+"-"+e;i[u[e].slug].handler(o,s,n,u[e])}l.style.display="block"})},t.bindCheckEvent=function(e,s,l,t,a,i,r){var o=e,u=t.type;d(s,t.trigger,function(){for(var e=0,t=u.length;e<t;e++){if(!i[u[e].slug])throw new Error("liveValidator暂不支持"+u[e].slug+"类型验证");if("require"===u[e].slug&&!u[e].controller)break;var n="lv-tips-"+u[e].slug+"-"+a+"-"+e;i[u[e].slug].handler(o,r,n,u[e])}l.style.display="block"}),d(s,"blur",function(){for(var e=!0,t=0,n=u.length;t<n;t++){if(!i[u[t].slug])throw new Error("liveValidator暂不支持"+u[t].slug+"类型验证");if("require"===u[t].slug&&!u[t].controller)break;var r="lv-tips-"+u[t].slug+"-"+a+"-"+t;i[u[t].slug].handler(o,s,r,u[t],1)||(e=!1)}l.style.display=e?"none":"block"})},t.rankPassword=function(e,t,n){if(t<4)throw new Error("密码最小长度不可小于4");if(n<6)throw new Error("密码最大长度不可小于6");var r,s=0,l=1,a=2,i=3,o=4,u=5,d=0;if(e.length<t)return s;if(e.length>n)return l;/[A-Z]/.test(e)&&d++;/[a-z]/.test(e)&&d++;/[0-9]/.test(e)&&d++;/[^A-Za-z0-9]/.test(e)&&d++;(r=d)<3&&d--;e.length>t&&(d+=Math.floor((e.length-t)/2));return r<2||d<3?a:d<4||r<3?i:d<6?o:u},t.isNode=function(e){return"object"===("undefined"==typeof Node?"undefined":r(Node))?e instanceof Node:e&&"object"===(void 0===e?"undefined":r(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},t.isElement=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":r(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":r(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equal=t.require=t.password=t.email=t.username=void 0;var v=n(1),r=(t.username={handler:function(e,t,n,r,s){var l=e,a=void 0;a=(t.length?(0,v.getCheckValue):(0,v.getElementValue))(t);var i=r.controller.allowChinese?"\\u4e00-\\u9fa5":"",o=new RegExp("^[a-zA-Z0-9"+i+"_-]{"+r.controller.min+","+r.controller.max+"}$").test(a);if(s)return o;var u=document.getElementById(n);return o?(0,v.handleElementClass)(u,l,"success"):(0,v.handleElementClass)(u,l,"failed"),o},tips:function(e){return"长度"+e.min+"到"+e.max+'位，只能包含英文、数字、"_"或"-"'}},t.email={handler:function(e,t,n,r,s){var l=e,a=void 0;a=(t.length?(0,v.getCheckValue):(0,v.getElementValue))(t);var i=new RegExp("^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$").test(a);if(s)return i;var o=document.getElementById(n);return i?(0,v.handleElementClass)(o,l,"success"):(0,v.handleElementClass)(o,l,"failed"),i},tips:function(){return"请输入正确的邮箱"}},t.password={handler:function(e,t,n,r,s){var l=e,a=void 0;a=(t.length?(0,v.getCheckValue):(0,v.getElementValue))(t);var i=r.controller,o={too_short:0,too_long:1,weak:2,medium:3,strong:4,very_strong:5},u=i.min?i.min:6,d=i.max?i.max:32,c=i.allowLowestLevel?i.allowLowestLevel:"weak",f=(0,v.rankPassword)(a,u,d);if(s)return 1<f&&o[c]<=f;var m=document.getElementById(n);return(0,v.handlePasswordClass)(m,l,f),1<f&&o[c]<=f},tips:function(e){var t=document.createDocumentFragment(),n=e.indicator?e.indicator:["too_short","weak","medium","strong","very_strong","very_long"],r=e.min?e.min:6,s=e.max?e.max:32,l={weak:"密码长度为"+r+"到"+s+"，允许使用字母、数字、符号",medium:"密码长度为"+r+"到"+s+"，必须包含字母、数字、符号至少2种",strong:"密码长度为"+r+"到"+s+"，必须包含字母、数字、符号至少3种",very_strong:"密码长度为"+r+"到"+s+"，必须包含字母、数字、符号至少3种"},a={too_short:{innerText:"太短",class:"lv-indicator-too-short"},weak:{innerText:"弱",class:"lv-indicator-weak"},medium:{innerText:"中等",class:"lv-indicator-medium"},strong:{innerText:"强",class:"lv-indicator-strong"},very_strong:{innerText:"非常强",class:"lv-indicator-very-strong"},too_long:{innerText:"太长",class:"lv-indicator-too-long"}},i=document.createElement("div");i.classList.add("lv-pw-strength"),n.forEach(function(e){var t=a[e],n=document.createElement("span");n.innerText=t.innerText,n.classList.add(t.class),i.appendChild(n)}),t.appendChild(i);var o=document.createElement("div"),u=e.allowLowestLevel?e.allowLowestLevel:"medium";return o.innerText=l[u],o.classList.add("lv-pw-text-tip"),t.appendChild(o),t}},{handler:function(e,t,n,r,s){var l=e,a=void 0,i=!(!(a=((0,v.isElement)(t)?(0,v.getElementValue):(0,v.getCheckValue))(t))||!a.length);if(s)return i;var o=document.getElementById(n);return i?(0,v.handleElementClass)(o,l,"success"):(0,v.handleElementClass)(o,l,"failed"),i},tips:function(){return"不能为空"}});t.require=r;t.equal={handler:function(e,t,n,r,s){if(!r.controller||!r.controller.compareTarget)throw new Error("equal类验证controller.compareTarget属性不可为空");var l=e,a=(0,v.getElementValue)(t),i=r.controller.compareTarget.trim().substr(1),o=a===(0,v.getElementValue)(document.getElementById(i));if(s)return o;var u=document.getElementById(n);return o?(0,v.handleElementClass)(u,l,"success"):(0,v.handleElementClass)(u,l,"failed"),o},tips:function(){return"再次输入内容"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.valide=function(e){for(var t=e,n=!0,r=0,s=t.needValide.length;r<s&&n;r++){var l=t.needValide[r].element.trim().substr(1),a=t.needValide[r].element.trim().substr(0,1),i=t.needValide[r].tipsContainer.trim().substr(1),o=document.getElementById(i),u=t.needValide[r].type;if(!u)return!0;for(var d=0,c=u.length;d<c;d++){if(!g[u[d].slug])throw new Error("liveValidator暂不支持"+u[d].slug+"类型验证");if("require"===u[d].slug&&!u[d].controller)break;var f="lv-tips-"+u[d].slug+"-"+r+"-"+d,m=void 0;switch(a){case"#":var v=document.getElementById(l);m=g[u[d].slug].handler(t,v,f,u[d]);break;case"@":var p=document.getElementsByName(l);m=g[u[d].slug].handler(t,p,f,u[d])}if(!m){n=!1,o.style.display="block";break}o.style.display="none"}}return n};var r=n(2),g={username:r.username,email:r.email,password:r.password,require:r.require,equal:r.equal}}],s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)).default;function s(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}var n,r});